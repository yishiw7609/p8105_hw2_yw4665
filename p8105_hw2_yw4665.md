p8105_hw2_yw4665
================
Yishi Wang
2025-09-23

## Package calls

Call necessary libraries here:

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.2
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

## Problem 1

Read desired data from the local_files folder and assign them to
according variables:

``` r
pols_month_df = read_csv("local_files/fivethirtyeight_datasets/pols-month.csv") |>
  janitor::clean_names()
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df = read_csv("local_files/fivethirtyeight_datasets/unemployment.csv") |>
  janitor::clean_names()
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = read_csv("local_files/fivethirtyeight_datasets/snp.csv") |>
  janitor::clean_names()
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Clean the the pols_month dataframe first and assign the result df to
‘cleaned_pols_month_df’:

``` r
cleaned_pols_month_df = pols_month_df |> 
  separate("mon", c("year", "month", "day"), "-") |> 
  mutate(
    month = month.name[as.integer(month)],
    president = if_else(prez_gop == 0, "dem", "gop"),
    year = as.numeric(year)
    ) |>
  select(-prez_gop, -prez_dem, -day)
```

Now clean the snp dataframe with similar procedures:

``` r
cleaned_snp_df = snp_df |>
  separate("date", c("month", "day", "year"), "/") |>
  mutate(
    month = month.name[as.integer(month)],
    # Change the year formatting to match with pols_month_df
    year = if_else(as.integer(year) < 30, as.integer(year) + 2000, as.integer(year) + 1900 ),
  ) |> 
  select(year, month, close)
```

Now tidy the unemployment dataframe to match the previous dataframes:

``` r
cleaned_unemployment_df = unemployment_df |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
    ) |>
  mutate(
    month = month.name[match(month, tolower(month.abb))]
    )
```

Now we combine all three dataframes through two left_joins:

``` r
result_df = cleaned_pols_month_df |>
  left_join(cleaned_snp_df, by = c("year", "month")) |>
  left_join(cleaned_unemployment_df, by = c("year", "month"))
```

Three datasets each contains information about an event over a period of
time, specifically speaking:

- pos-month: includes number of governors from republican and democrat
  parties and the party of presidency from 1947-01 to 2015-06
- snp: includes Standard & Poor’s stock market index from 1950-01 to
  2015-07
- unempolyment: includes unemployment rate from 1948-01 to 2015-12

By combining the datasets above with date (year-month), we are able to
see the impact of politician parties on SnP stock market and
unempolyment rate. These data over time may reflect the overall
performance of a party or presidency.

## Problem02

First, import the Mr. Trash Wheel sheet and apply changes:

``` r
mtw_df = read_excel("local_files/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N653") |>
  janitor::clean_names() |>
  mutate(
    sports_balls = as.integer(round(sports_balls))
  )
```
