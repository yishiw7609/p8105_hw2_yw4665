---
title: "p8105_hw2_yw4665"
author: "Yishi Wang"
date: "2025-09-23"
output: github_document
---

## Package calls
Call necessary libraries here:
```{r}
library(tidyverse)
```

## Problem 1
Read desired data from the local_files folder and assign them to according variables:
```{r}
pols_month_df = read_csv("local_files/fivethirtyeight_datasets/pols-month.csv") |>
  janitor::clean_names()
unemployment_df = read_csv("local_files/fivethirtyeight_datasets/unemployment.csv") |>
  janitor::clean_names()
snp_df = read_csv("local_files/fivethirtyeight_datasets/snp.csv") |>
  janitor::clean_names()
```
Clean the the pols_month dataframe first and assign the result df to 'cleaned_pols_month_df':
```{r}
cleaned_pols_month_df = pols_month_df |> 
  separate("mon", c("year", "month", "day"), "-") |> 
  mutate(
    month = month.name[as.integer(month)],
    president = if_else(prez_gop == 0, "dem", "gop"),
    year = as.numeric(year)
    ) |>
  select(-prez_gop, -prez_dem, -day)
```

Now clean the snp dataframe with similar procedures:
```{r}
cleaned_snp_df = snp_df |>
  separate("date", c("month", "day", "year"), "/") |>
  mutate(
    month = month.name[as.integer(month)],
    # Change the year formatting to match with pols_month_df
    year = if_else(as.integer(year) < 30, as.integer(year) + 2000, as.integer(year) + 1900 ),
  ) |> 
  select(year, month, close)
```

Now tidy the unemployment dataframe to match the previous dataframes:
```{r}
cleaned_unemployment_df = unemployment_df |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
    ) |>
  mutate(
    month = month.name[match(month, tolower(month.abb))]
    )
```
Now we combine all three dataframes through two left_joins:
```{r}
result_df = cleaned_pols_month_df |>
  left_join(cleaned_snp_df, by = c("year", "month")) |>
  left_join(cleaned_unemployment_df, by = c("year", "month"))
```
Three datasets each contains information about an event over a period of time, specifically speaking:

- pos-month: includes data on the number of governors from republican and democrat parties and the party of president from 1947-01 to 2015-06
- snp: includes Standard & Poorâ€™s stock market index from 1950-01 to 2015-07
-





